<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{base :: head-resources}"></head>
<body>
<div th:replace="~{base :: layout(~{::content})}">
    <div th:fragment="content">

        <h2 class="my-4" th:text="${enrollment.id != null ? '‚úè S·ª≠a Enrollment' : '‚ûï Th√™m Enrollment'}"></h2>

        <form th:action="@{/admin/enrollments/save}"
              th:object="${enrollment}"
              method="post"
              class="row g-3 needs-validation"
              novalidate>
            <input type="hidden" th:field="*{id}"/>

            <!-- H·ªçc vi√™n -->
            <div class="col-md-6">
                <label class="form-label">H·ªçc vi√™n *</label>
                <select th:field="*{studentId}" class="form-select" required>
                    <option value="">-- Ch·ªçn h·ªçc vi√™n --</option>
                    <option th:each="s : ${students}"
                            th:value="${s.id}"
                            th:text="${s.fullName}"
                            th:selected="${enrollment.studentId != null and enrollment.studentId.id == s.id}">
                    </option>
                </select>
                <div class="text-danger" th:errors="*{studentId}"></div>
            </div>

            <!-- Kho√° h·ªçc -->
            <div class="col-md-6">
                <label class="form-label">Kho√° h·ªçc *</label>
                <select th:field="*{courseId}" class="form-select" required>
                    <option value="">-- Ch·ªçn kho√° h·ªçc --</option>
                    <option th:each="c : ${courses}"
                            th:value="${c.id}"
                            th:text="${c.title}"
                            th:selected="${enrollment.courseId != null and enrollment.courseId.id == c.id}">
                    </option>
                </select>
                <div class="text-danger" th:errors="*{courseId}"></div>
            </div>

            <!-- Ng√†y ghi danh -->
            <div class="col-md-6">
                <label class="form-label">Ng√†y ghi danh *</label>
                <input type="datetime-local"
                       th:field="*{enrolledAt}"
                       class="form-control"
                       required/>
                <div class="text-danger" th:errors="*{enrolledAt}"></div>
            </div>

            <!-- Tr·∫°ng th√°i truy c·∫≠p -->
            <div class="col-md-6">
                <label class="form-label">Tr·∫°ng th√°i truy c·∫≠p *</label>
                <select th:field="*{accessStatus}" class="form-select" required>
                    <option value="ACTIVE">ƒêang h·ªçc</option>
                    <option value="EXPIRED">H·∫øt h·∫°n</option>
                    <option value="BLOCKED">B·ªã ch·∫∑n</option>
                </select>
                <div class="text-danger" th:errors="*{accessStatus}"></div>
            </div>

            <!-- N√∫t -->
            <div class="col-12">
                <button type="submit" class="btn btn-primary">
                    üíæ <span th:text="${enrollment.id != null ? 'C·∫≠p nh·∫≠t' : 'Th√™m m·ªõi'}"></span>
                </button>
                <a th:href="@{/admin/enrollments}" class="btn btn-secondary">‚¨Ö Quay l·∫°i</a>
            </div>
        </form>

    </div>
</div>
</body>
</html>
