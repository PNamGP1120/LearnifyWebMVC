<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
    <head th:replace="~{base :: head-resources}"></head>
    <body>
        <div th:replace="~{base :: layout(~{::content})}">
            <div th:fragment="content">

                <h2 class="my-4">üìö Danh s√°ch Kho√° h·ªçc</h2>

                <!-- B·ªô l·ªçc -->
                <form method="get" class="row g-2 mb-3">
                    <div class="col-md-3">
                        <input type="text" name="kw" class="form-control" placeholder="T√¨m theo ti√™u ƒë·ªÅ..."
                               th:value="${param.kw}">
                    </div>
                    <div class="col-md-3">
                        <select name="categoryId" class="form-select">
                            <option value="">-- Danh m·ª•c --</option>
                            <option th:each="cat : ${categories}" th:value="${cat.id}" th:text="${cat.name}"
                                    th:selected="${param.categoryId == cat.id}"></option>
                        </select>
                    </div>
                    <div class="col-md-3">
                        <select name="instructorId" class="form-select">
                            <option value="">-- Gi·∫£ng vi√™n --</option>
                            <option th:each="i : ${instructors}" th:value="${i.user.id}" th:text="${i.user.fullName}"
                                    th:selected="${param.instructorId == i.user.id}"></option>
                        </select>
                    </div>
                    <div class="col-md-2">
                        <select name="status" class="form-select">
                            <option value="">-- Tr·∫°ng th√°i --</option>
                            <option value="DRAFT" th:selected="${param.status == 'DRAFT'}">Nh√°p</option>
                            <option value="PUBLISHED" th:selected="${param.status == 'PUBLISHED'}">Xu·∫•t b·∫£n</option>
                            <option value="ARCHIVED" th:selected="${param.status == 'ARCHIVED'}">L∆∞u tr·ªØ</option>
                        </select>
                    </div>
                    <div class="col-md-1">
                        <button class="btn btn-primary w-100">L·ªçc</button>
                    </div>
                </form>

                <!-- B·∫£ng Course -->
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>ID</th><th>Ti√™u ƒë·ªÅ</th><th>Danh m·ª•c</th><th>Gi·∫£ng vi√™n</th><th>Tr·∫°ng th√°i</th><th>H√†nh ƒë·ªông</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="c : ${courses}">
                            <td th:text="${c.id}"></td>
                            <td th:text="${c.title}"></td>
                            <td th:text="${c.categoryId != null ? c.categoryId.name : 'Ch∆∞a c√≥'}"></td>
                            <td th:text="${c.instructorId != null ? c.instructorId.fullName : '---'}"></td>

                            <td th:text="${c.status}"></td>
                            <td>
                                <a th:href="@{'/admin/courses/' + ${c.id} + '/edit'}" class="btn btn-sm btn-warning">S·ª≠a</a>
                                <a th:href="@{'/admin/courses/' + ${c.id} + '/delete'}" class="btn btn-sm btn-danger">Xo√°</a>
                                <a th:href="@{'/admin/courses/' + ${c.id} + '/sections'}" class="btn btn-sm btn-info">Sections</a>
                            </td>
                        </tr>
                    </tbody>
                </table>

                <!-- Ph√¢n trang -->
                <nav th:if="${count > pageSize}" class="mt-3">
                    <ul class="pagination">
                        <li class="page-item" th:classappend="${page == 1} ? 'disabled'">
                            <a class="page-link" th:href="@{|?page=${page-1}&pageSize=${pageSize}|}">Tr∆∞·ªõc</a>
                        </li>
                        <li class="page-item"
                            th:each="i : ${#numbers.sequence(1, T(java.lang.Math).ceil(count / pageSize))}"
                            th:classappend="${page == i} ? 'active'">
                            <a class="page-link" th:href="@{|?page=${i}&pageSize=${pageSize}|}" th:text="${i}"></a>
                        </li>
                        <li class="page-item" th:classappend="${page * pageSize >= count} ? 'disabled'">
                            <a class="page-link" th:href="@{|?page=${page+1}&pageSize=${pageSize}|}">Ti·∫øp</a>
                        </li>
                    </ul>
                </nav>

                <a th:href="@{/admin/courses/add}" class="btn btn-success">‚ûï Th√™m kho√° h·ªçc</a>

            </div>
        </div>
    </body>
</html>
